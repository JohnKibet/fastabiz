@page "/customer/payments"
@layout MainLayout
@inject AuthenticationStateProvider AuthProvider
@inject NavigationManager Navigation
@attribute [Authorize(Roles = "customer")]

<div class="max-w-3xl mx-auto">
    <!-- Page Heading -->
    <h2 class="text-2xl font-semibold text-gray-800 mb-6 flex items-center gap-2">
        üí≥ Complete Your Payment
    </h2>

    <!-- Order Summary -->
    <div class="bg-white shadow-sm rounded-xl border p-6 mb-6">
        <h3 class="text-lg font-medium text-gray-800 mb-4">Order Summary</h3>
        <div class="space-y-2 text-sm text-gray-700">
            <p><span class="font-semibold">Order ID:</span> ORD105</p>
            <p><span class="font-semibold">Items:</span> 3</p>
            <p><span class="font-semibold">Total:</span> $120.00</p>
            <p><span class="font-semibold">Status:</span> <span class="text-orange-600 font-semibold">Pending Payment</span></p>
        </div>
    </div>

    <!-- Payment Options -->
    <div class="bg-white shadow-sm rounded-xl border p-6">
        <h3 class="text-lg font-medium text-gray-800 mb-4">Payment Method</h3>

        <div class="space-y-4">
            <!-- Card Payment -->
            <div class="border rounded-lg p-4 hover:border-orange-500 transition cursor-pointer">
                <input type="radio" id="card" name="payment" class="mr-2" checked />
                <label for="card" class="font-medium text-gray-800">Credit / Debit Card</label>
                <div class="mt-3 space-y-3">
                    <input
                        type="text"
                        placeholder="Card Number"
                        class="w-full px-3 py-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-orange-500 focus:outline-none text-sm"
                    />
                    <div class="flex gap-3">
                        <input
                            type="text"
                            placeholder="MM/YY"
                            class="w-1/3 px-3 py-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-orange-500 focus:outline-none text-sm"
                        />
                        <input
                            type="text"
                            placeholder="CVC"
                            class="w-1/3 px-3 py-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-orange-500 focus:outline-none text-sm"
                        />
                    </div>
                </div>
            </div>

            <!-- Mobile Money / Other -->
            <div class="border rounded-lg p-4 hover:border-orange-500 transition cursor-pointer">
                <input type="radio" id="mpesa" name="payment" class="mr-2" />
                <label for="mpesa" class="font-medium text-gray-800">Mobile Money (M-Pesa, Airtel Money)</label>
                <div class="mt-3">
                    <input
                        type="text"
                        placeholder="Phone Number"
                        class="w-full px-3 py-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-orange-500 focus:outline-none text-sm"
                    />
                </div>
            </div>
        </div>

        <!-- Pay Button -->
        <button
            class="mt-6 w-full bg-orange-500 hover:bg-orange-600 text-white font-medium py-3 px-4 rounded-lg shadow-sm transition">
            Pay Now
        </button>
    </div>

    <!-- Confirmation Message -->
    @if (!string.IsNullOrEmpty(successMessage))
    {
        <div class="mt-6 text-green-600 bg-green-50 border border-green-200 rounded-lg p-4 text-sm">
            ‚úÖ @successMessage
        </div>
    }
    @if (!string.IsNullOrEmpty(errorMessage))
    {
        <div class="mt-6 text-red-600 bg-red-50 border border-red-200 rounded-lg p-4 text-sm">
            ‚ö†Ô∏è @errorMessage
        </div>
    }
</div>

@code {
    private string? successMessage { get; set; }
    private string? errorMessage { get; set; }

    private async Task ProcessPayment()
    {
        try
        {
            // TODO: integrate with backend payment service
            successMessage = "Payment successful! üéâ";
            errorMessage = null;
        }
        catch (Exception ex)
        {
            errorMessage = $"Payment failed: {ex.Message}";
            successMessage = null;
        }
    }
}
