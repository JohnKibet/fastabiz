@page "/storefront"
@layout StorefrontLayout
@inject NavigationManager NavigationManager

<div class="px-4">
    <h3 class="text-xl font-bold mb-0">Storefront</h3>

    <div class="storefront-container flex">
        <!-- Products Grid -->
        <main class="w-full grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            @foreach (var product in Products)
            {
                <ProductCard Product="@product" OnSelected="@ViewProductDetail" />
            }
        </main>
    </div>

    <!-- Pagination (optional) -->
    <PaginationControl CurrentPage="@CurrentPage" TotalPages="@TotalPages"
                    OnPreviousPage="@LoadPreviousPage"
                    OnNextPage="@LoadNextPage" />

</div>

@code {
    // Mock Data (can be replaced by API call)
    private List<ProductListItem> Products = MockData.GetAllProducts();

    private int CurrentPage = 1;
    private int TotalPages = 1;

    protected override void OnInitialized()
    {
        TotalPages = (int)Math.Ceiling((double)Products.Count / 9); // example: 9 per page
    }

    private async Task LoadPreviousPage(int page)
    {
        CurrentPage = page;
        // fetch page data if needed
    }

    private async Task LoadNextPage(int page)
    {
        CurrentPage = page;
        // fetch page data if needed
    }

    private void ViewProductDetail(ProductListItem product)
    {
        NavigationManager.NavigateTo($"/product/{product.Id}");
    }
}
