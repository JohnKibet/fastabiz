@page "/stores"
@layout StorefrontLayout
@inject StoreService StoreService
@inject NavigationManager NavigationManager

<div class="px-4">
    <h3 class="text-2xl font-bold mb-0">All Stores</h3>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        @foreach (var store in Stores)
        {
            <StoreCard Store="@store" OnSelected="@NavigateToStore" />
        }
    </div>
</div>

@code {
    [CascadingParameter] StorefrontLayout? Layout { get; set; }
    private List<StoreDto> Stores = new();

    protected override async Task OnInitializedAsync()
    {
        var result = await StoreService.GetAllStores();
        if (result.Success && result.Data != null)
        {
            Stores = result.Data;
        }
        else
        {
            Console.Error.WriteLine("Failed to load stores: " + result.Error);
        }

        Layout?.SetBreadcrumbs(new List<BreadcrumbItem>
{
new() { Title = "Home", Url = "/" },
new() { Title = "Stores", Url = "/stores" }
});
    }
    private void NavigateToStore(StoreDto store)
        => NavigationManager.NavigateTo($"/store/{store.Id}");
}